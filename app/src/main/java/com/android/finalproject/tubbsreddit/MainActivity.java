package com.android.finalproject.tubbsreddit;import android.content.res.Configuration;import android.os.Bundle;import android.support.v4.app.ActionBarDrawerToggle;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentManager;import android.support.v4.widget.DrawerLayout;import android.support.v7.app.ActionBarActivity;import android.util.Log;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.widget.AdapterView;import android.widget.ArrayAdapter;import android.widget.ListView;import com.android.finalproject.tubbsreddit.constants.Constants;public class MainActivity extends ActionBarActivity {    private static final String TAG = MainActivity.class.getSimpleName();    private DrawerLayout mDrawerLayout;    private ListView mDrawerList;    private ActionBarDrawerToggle mDrawerToggle;    WebViewFragment mWebView = null;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        if (savedInstanceState == null) {            getSupportFragmentManager().beginTransaction()                    .add(R.id.container, new SubRedditFragment())                    .commit();        }      mDrawerLayout = (DrawerLayout)findViewById(R.id.drawer_layout);      mDrawerList = (ListView)findViewById(R.id.left_drawer);       mDrawerToggle = new ActionBarDrawerToggle(this,                                                 mDrawerLayout,                                                 R.drawable.ic_drawer,                                                 R.string.drawer_open,                                                 R.string.drawer_closed){           @Override           public void onDrawerOpened(View drawerView) {               super.onDrawerOpened(drawerView);               invalidateOptionsMenu();           }           @Override           public void onDrawerClosed(View drawerView) {               super.onDrawerClosed(drawerView);               invalidateOptionsMenu();           }       };        mDrawerLayout.setDrawerListener(mDrawerToggle);        getSupportActionBar().setDisplayHomeAsUpEnabled(true);        getSupportActionBar().setHomeButtonEnabled(true);      mDrawerList.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,Constants.createSubRedditList()));      mDrawerList.setOnItemClickListener(new DrawerItemClickListener());    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.menu_main, menu);        return true;    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        if(mDrawerToggle.onOptionsItemSelected(item)){            return true;        }        //noinspection SimplifiableIfStatement        if (id == R.id.action_settings) {            return true;        }        return super.onOptionsItemSelected(item);    }    private class DrawerItemClickListener implements ListView.OnItemClickListener {        private final String TAG = DrawerItemClickListener.class.getSimpleName();        @Override        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {            String mSubReddit = (String)parent.getItemAtPosition(position);            SubRedditFragment fragment = SubRedditFragment.newInstance(mSubReddit);            FragmentManager fragmentManager = getSupportFragmentManager();            fragmentManager.beginTransaction()                            .replace(R.id.container,fragment)                            .commit();            mDrawerLayout.closeDrawer(mDrawerList);        }    }    @Override    protected void onPostCreate(Bundle savedInstanceState) {        super.onPostCreate(savedInstanceState);        // Sync the toggle state after onRestoreInstanceState has occurred.        mDrawerToggle.syncState();    }    @Override    public void onConfigurationChanged(Configuration newConfig) {        super.onConfigurationChanged(newConfig);        mDrawerToggle.onConfigurationChanged(newConfig);    }    @Override    public void onBackPressed() {        Fragment webview = getSupportFragmentManager().findFragmentByTag("webview");        Log.i(TAG,"webview = " + webview);        if(webview instanceof WebViewFragment){            boolean goBack = ((WebViewFragment)webview).canGoBack();            if(goBack){                ((WebViewFragment)webview).goBack();            }            else {                super.onBackPressed();            }        }    }}